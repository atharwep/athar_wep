<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø«Ø± | Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø§Ø­ØªØ±Ø§Ù‚ ÙˆØ§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø© Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="protection.js"></script>
    <script src="js/modules/prompt_builder.js"></script>
    <script src="js/modules/api_proxy.js"></script>
</head>

<body class="light-theme">
    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <div class="container" style="max-width: 900px;">
        <nav>
            <div class="logo-container">
                <div class="ripple-wrapper">
                    <div class="ripple"></div>
                    <img src="ØªÙ†Ø²ÙŠÙ„.jpg" id="mainLogo" alt="Athar">
                </div>
                <div>
                    <div class="logo">Ø£Ø«Ø±</div>
                    <div class="logo-slogan">Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø© ÙˆØ§Ù„Ø±ÙØ§Ù‡ Ø§Ù„Ù…Ù‡Ù†ÙŠ</div>
                </div>
            </div>
            <a href="index.html" class="btn btn-ghost">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
        </nav>

        <div class="glass-card anim-fade-in" style="margin-top: 40px; border-top: 4px solid var(--accent);">
            <h2 style="color: var(--accent); margin-bottom: 20px; font-weight: 900;">ğŸ§˜ Ø§Ø³ØªØ¯Ø§Ù…Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠ</h2>
            <p style="color: var(--text-secondary); margin-bottom: 30px;">Ø§Ø­Ù…Ù Ù†ÙØ³Ùƒ Ù…Ù† Ø§Ù„Ø§Ø­ØªØ±Ø§Ù‚ Ø§Ù„Ù…Ù‡Ù†ÙŠ ÙˆØ¨Ù†Ù Ù…Ø³Ø§Ø±Ø§Ù‹
                Ù…Ø³ØªØ¯Ø§Ù…Ø§Ù‹ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ØªÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù…ØªÙ…ÙŠØ² ÙˆØ§Ù„Ø±ÙØ§Ù‡ Ø§Ù„Ø´Ø®ØµÙŠ.</p>

            <div class="form-group">
                <label>Ø·Ø¨ÙŠØ¹Ø© Ø¹Ù…Ù„Ùƒ (Ø£Ùˆ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©):</label>
                <input type="text" id="jobNature" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ù…Ù†Ø³Ù‚ Ø­Ù…Ø§ÙŠØ©ØŒ Ø¹Ù…Ù„ Ù…ÙŠØ¯Ø§Ù†ÙŠØŒ Ø¶Ø¨Ø§Ø· Ø¨ÙŠØ§Ù†Ø§Øª..."
                    class="elegant-input">
            </div>
            <div class="form-group" style="margin-top: 15px;">
                <label>ØªÙˆØµÙŠÙ Ø§Ù„Ø¶ØºÙˆØ· Ø§Ù„ØªÙŠ ØªÙˆØ§Ø¬Ù‡Ù‡Ø§:</label>
                <textarea id="workEnv" placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø³Ø§Ø¹Ø§Øª Ø¹Ù…Ù„ Ø·ÙˆÙŠÙ„Ø©ØŒ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ ØµØ¯Ù…Ø§ØªØŒ Ø¶ØºØ· Ù…ÙˆØ§Ø¹ÙŠØ¯ Ù†Ù‡Ø§Ø¦ÙŠØ©..."
                    style="min-height: 100px;"></textarea>
            </div>

            <button id="checkBurnoutBtn" class="btn btn-primary"
                style="width: 100%; justify-content: center; padding: 18px; font-size: 1.1rem; border-radius: 16px; background: var(--accent); border-color: var(--accent);">
                ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø© Ø§Ù„ÙÙˆØ±ÙŠ âš¡
            </button>
        </div>

        <div id="loader" style="display: none; margin: 40px 0; text-align: center;">
            <div class="loading-spinner"
                style="border: 4px solid var(--glass-border); border-top-color: var(--accent); width: 50px; height: 50px; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;">
            </div>
            <p style="color: var(--accent); font-weight: 700;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ù…Ø¤Ø´Ø±Ø§Øª Ø§Ù„Ø¶ØºØ· ÙˆØ§Ù„Ø±ÙØ§Ù‡...</p>
        </div>

        <div id="resultArea" style="display: none;" class="anim-slide-up">
            <div class="glass-card" style="margin-top: 30px;">
                <div id="burnoutContent"></div>
                <button onclick="ProtectionManager.verify(() => window.print())" class="btn btn-ghost"
                    style="width: 100%; margin-top: 40px; justify-content: center;">
                    <i class="fas fa-file-pdf"></i> ØªØ­Ù…ÙŠÙ„ ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙˆÙ‚Ø§ÙŠØ©
                </button>
            </div>
        </div>
    </div>

    <footer class="main-footer">
        <div class="footer-credit">ØªØ·ÙˆÙŠØ± ÙˆØªÙ†ÙÙŠØ° Ø£. Ù†Ø¨ÙŠÙ„ Ø§Ù„Ø­Ù…ÙŠØ¯ &copy; 2025</div>
    </footer>

    <style>
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .indicator-box {
            text-align: center;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid var(--glass-border);
        }

        .logic-card {
            background: rgba(0, 0, 0, 0.02);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            border-right: 4px solid var(--accent);
        }

        .tip-item {
            display: flex;
            gap: 15px;
            margin-bottom: 12px;
            color: var(--text-primary);
        }

        .tip-item i {
            color: var(--accent);
            margin-top: 4px;
        }

        .elegant-input {
            padding: 14px 20px;
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            font-family: 'Cairo';
            width: 100%;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.8) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid rgba(255, 255, 255, 0.5) !important;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05) !important;
        }

        body.light-theme {
            background-color: #f0f4f8 !important;
        }
    </style>

    <script src="protection.js"></script>
    <script>
        const apiProxy = new APIProxy();
        document.getElementById('checkBurnoutBtn').onclick = async () => {
            const nature = document.getElementById('jobNature').value;
            const env = document.getElementById('workEnv').value;
            if (!nature) return alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø¹Ù…Ù„");

            const btn = document.getElementById('checkBurnoutBtn');
            const loader = document.getElementById('loader');
            const resultArea = document.getElementById('resultArea');

            btn.disabled = true;
            loader.style.display = 'block';
            resultArea.style.display = 'none';

            const prompt = PromptBuilder.buildUnifiedPrompt('Ø§Ø­ØªØ±Ø§Ù‚', nature, {
                jobDescription: env,
                itemCount: 10
            });

            try {
                const data = await apiProxy.callAI(prompt, { model: "llama-3.3-70b-versatile" });
                if (!data) throw new Error("AI_ERROR");

                let riskColor = data.burnout_risk === 'High' ? 'var(--danger)' : (data.burnout_risk === 'Medium' ? '#eab308' : 'var(--accent)');

                document.getElementById('burnoutContent').innerHTML = `
                    <div class="indicator-box" style="border-top: 5px solid ${riskColor}; background: ${riskColor}05;">
                        <h2 style="color: ${riskColor}; margin-bottom: 10px;">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø·Ø±: ${data.risk_ar}</h2>
                        <p style="color: var(--text-primary); font-weight: 600;">${data.analysis}</p>
                    </div>

                    <h3 style="color: var(--accent); margin-bottom: 20px;">ğŸš© Ù…Ø¤Ø´Ø±Ø§Øª ØªØ³ØªÙˆØ¬Ø¨ Ø§Ù„Ø­Ø°Ø±:</h3>
                    <div style="margin-bottom: 30px;">
                        ${(data.markers || []).map(m => `<div class="logic-card">${m}</div>`).join('')}
                    </div>

                    <h3 style="color: var(--accent); margin-bottom: 20px;">ğŸ›¡ï¸ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ§Øª Ø§Ù„Ø­Ù…Ø§ÙŠØ© Ø§Ù„ÙÙˆØ±ÙŠØ©:</h3>
                    <div style="margin-bottom: 30px;">
                        ${(data.survival_tips || []).map(t => `<div class="tip-item"><i class="fas fa-shield-alt"></i><span>${t}</span></div>`).join('')}
                    </div>

                    <div style="background: var(--accent)08; padding: 25px; border-radius: 20px; border: 1px dashed var(--accent);">
                        <h3 style="color: var(--accent); margin-bottom: 15px;">ğŸ“… Ø±Ø¤ÙŠØ© Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø© Ø§Ù„Ø·ÙˆÙŠÙ„Ø©:</h3>
                        <p style="line-height: 1.8;">${data.long_term_plan}</p>
                    </div>
                `;

                resultArea.style.display = 'block';
                window.scrollTo({ top: resultArea.offsetTop - 50, behavior: 'smooth' });
            } catch (e) {
                console.error(e);
                alert("ØªØ¹Ø°Ø± Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø­Ø§Ù„ÙŠØ§Ù‹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.");
            } finally {
                btn.disabled = false;
                loader.style.display = 'none';
            }
        };
    </script>
</body>

</html>