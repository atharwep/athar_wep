const LANG_CONFIG = {
    ar: {
        dir: 'rtl',
        lang: 'ar',
        name: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
        btn: 'English ðŸ‡ºðŸ‡¸',
        translations: {
            "nav_home": "ðŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
            "nav_about": "â„¹ï¸ Ø¹Ù† Ø§Ù„Ù…Ù†ØµØ©",
            "nav_new": "âœ¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯",
            "nav_lib": "ðŸ“š Ø§Ù„Ù…ÙƒØªØ¨Ø©",
            "nav_saved": "ðŸ“ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø§Øª",
            "nav_cv": "ðŸ“„ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©",
            "nav_cv_pro": "ðŸŽ¨ Ø³ÙŠØ±Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© (Paid)",
            "nav_cv_ats": "ðŸ“„ Ø³ÙŠØ±Ø© ATS (Paid)",
            "nav_refine": "âš¡ Ø§Ù„Ù…Ù†Ù‚Ø­ Ø§Ù„Ø°ÙƒÙŠ",
            "refine_title": "âœï¸ Ø§Ù„Ù…Ø·ÙˆØ± ÙˆØ§Ù„Ù…Ù†Ù‚Ø­ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ V3.0",
            "refine_subtitle": "ØªØ­Ù„ÙŠÙ„ Ø°ÙƒÙŠ Ù„Ù„ÙØ¬ÙˆØ§Øª ÙˆØªØ­Ø³ÙŠÙ†Ø§Øª ØªÙØ§Ø¹Ù„ÙŠØ© Ù…Ø®ØµØµØ©",
            "step_upload": "Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª",
            "step_analysis": "Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†",
            "step_improve": "Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª",
            "step_review": "Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©",
            "ai_output": "ðŸ’Ž Ù…Ø®Ø±Ø¬Ø§Øª Ù…Ù†ØµØ© Ø£Ø«Ø± V3.0",
            "jobs_title": "Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø´Ø§ØºØ±Ø©",
            "jobs_search": "Ø§Ø¨Ø­Ø« Ø¹Ù† ÙØ±ØµØ©...",
            "major_updates": "Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
            "saved_title": "ðŸ“ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹",


            "hero_title": "Ø£Ø«Ù€Ù€Ù€Ù€Ù€Ø±",
            "hero_slogan": "Ø£Ø«Ø± | Ù„Ø£Ù† Ø§Ù„ØªØºÙŠÙŠØ± ÙŠØ¨Ø¯Ø£ Ø¨Ø®Ø·Ø©",
            "step1_title": "1. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª",
            "step2_title": "2. ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£ÙÙƒØ§Ø±",
            "step3_title": "3. ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­",
            "step4_title": "4. Ø§Ù„Ù…ÙˆØ§Ø²Ù†Ø©",
            "step5_title": "5. Ø§Ù„ØªØµØ¯ÙŠØ±",
            "analyze_h2": "ðŸ’¡ Ø§Ø¨Ø¯Ø£ ÙÙƒØ±ØªÙƒ Ù‡Ù†Ø§",
            "analyze_p": "Ø£Ø¯Ø®Ù„ ÙÙƒØ±Ø© Ù…Ø¨Ø¯Ø¦ÙŠØ© Ø£Ùˆ Ø§Ø±ÙØ¹ Ù…Ù„Ù (Ø¥Ø¹Ù„Ø§Ù† Ù…Ù†Ø­Ø© / RFP) Ù„ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨ØªØ­Ù„ÙŠÙ„Ù‡.",
            "label_idea": "ÙÙƒØ±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ / Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:",
            "ph_idea": "Ù…Ø«Ø§Ù„: Ù…Ø´Ø±ÙˆØ¹ Ø¯Ø¹Ù… ØªØ¹Ù„ÙŠÙ…ÙŠ Ù„Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„Ù…ØªØ³Ø±Ø¨ÙŠÙ† ÙÙŠ Ø±ÙŠÙ Ø­Ù„Ø¨...",
            "search_placeholder": "Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ØŒ Ø¯Ù„ÙŠÙ„ØŒ Ø£Ùˆ Ù…ÙˆØ±Ø¯...",
            "lib_syncing": "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Google Drive...",
            "lib_sync_success": "ØªÙ…Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ø¨Ù†Ø¬Ø§Ø­!",
            "lib_sync_fail": "ÙØ´Ù„Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø©. ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Bridge.",
            "label_budget": "Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªÙˆÙØ±Ø© ($):",
            "label_duration": "Ø§Ù„Ù…Ø¯Ø© (Ø£Ø´Ù‡Ø±):",
            "label_country": "Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©:",
            "label_file": "Ø£Ùˆ Ø§Ø±ÙØ¹ Ù…Ù„Ù Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† (PDF/DOCX):",
            "btn_analyze": "ØªØ­Ù„ÙŠÙ„ Ø§Ù„ÙÙƒØ±Ø© âš¡",
            "sec_ideas_title": "âœ¨ Ø§Ù„Ø£ÙÙƒØ§Ø± Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©",
            "sec_ideas_p": "Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ØªØ­Ù„ÙŠÙ„ÙƒØŒ Ø¥Ù„ÙŠÙƒ Ø£ÙØ¶Ù„ Ø§Ù„Ø£ÙÙƒØ§Ø± Ø§Ù„Ù…ØªÙˆØ§ÙÙ‚Ø© Ù…Ø¹ Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ±:",
            "btn_generate_prop": "ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù‚ØªØ±Ø­ Ø§Ù„ÙƒØ§Ù…Ù„ ðŸ“",
            "sec_budget_title": "ðŸ’° Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©",
            "btn_export_word": "ðŸ“„ ØªØµØ¯ÙŠØ± Word",
            "btn_export_excel": "ðŸ“Š ØªØµØ¯ÙŠØ± Excel",
            "btn_save": "ðŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹",
            "nav_ops": "ðŸ¢ Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…Ù†Ø¸Ù…Ø§Øª",
            "nav_admin": "ðŸ› ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",
            "nav_logout": "Ø®Ø±ÙˆØ¬ ðŸšª",
            "btn_start": "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù† ðŸš€",
            "footer_credit": "ØªØ·ÙˆÙŠØ± ÙˆØªÙ†ÙÙŠØ° Ø£. Ù†Ø¨ÙŠÙ„ Ø§Ù„Ø­Ù…ÙŠØ¯"
        }
    },
    en: {
        dir: 'ltr',
        lang: 'en',
        name: 'English',
        btn: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ðŸ‡¸ðŸ‡¦',
        translations: {
            "nav_home": "ðŸ  Home",
            "nav_about": "â„¹ï¸ About",
            "nav_new": "âœ¨ What's New",
            "nav_lib": "ðŸ“š Library",
            "nav_saved": "ðŸ“ Saved Files",
            "nav_ops": "ðŸ¢ Org Services",
            "nav_admin": "ðŸ› ï¸ Admin Panel",
            "nav_logout": "Logout ðŸšª",
            "btn_start": "Start Now ðŸš€",
            "nav_cv": "ðŸ“„ CV Maker",
            "nav_cv_pro": "ðŸŽ¨ Pro CV (Paid)",
            "nav_cv_ats": "ðŸ“„ ATS CV (Paid)",
            "nav_refine": "âš¡ Smart Refiner",
            "refine_title": "âœï¸ Interactive Refiner V3.0",
            "refine_subtitle": "Smart gap analysis and interactive improvements",
            "step_upload": "Upload",
            "step_analysis": "Analysis",
            "step_improve": "Improvements",
            "step_review": "Final Review",
            "ai_output": "ðŸ’Ž Athar Platform Output",
            "jobs_title": "Job Vacancies",
            "jobs_search": "Search for jobs...",
            "major_updates": "Major Improvements",
            "saved_title": "ðŸ“ Locally Saved Files",


            "hero_title": "ATHAR",
            "hero_slogan": "Athar | Change Starts with a Plan",
            "step1_title": "1. Analysis",
            "step2_title": "2. Ideas",
            "step3_title": "3. Proposal",
            "step4_title": "4. Budget",
            "step5_title": "5. Export",
            "analyze_h2": "ðŸ’¡ Start Your Idea",
            "analyze_p": "Enter an initial idea or upload a file (Grant Ad / RFP) for system analysis.",
            "label_idea": "Project Idea / Problem:",
            "ph_idea": "Ex: Educational support for drop-out children in Aleppo...",
            "search_placeholder": "Search for resources, guides...",
            "lib_syncing": "Syncing with Google Drive...",
            "lib_sync_success": "Sync Successful!",
            "lib_sync_fail": "Sync Failed. Check Bridge settings.",
            "label_budget": "Budget ($):",
            "label_duration": "Duration (Months):",
            "label_country": "Target Country:",
            "label_file": "Or upload file (PDF/DOCX):",
            "btn_analyze": "Analyze Idea âš¡",
            "sec_ideas_title": "âœ¨ Suggested Ideas",
            "sec_ideas_p": "Based on analysis, here are the best compliant ideas:",
            "btn_generate_prop": "Write Full Proposal ðŸ“",
            "sec_budget_title": "ðŸ’° Detailed Budget",
            "btn_export_word": "ðŸ“„ Export Word",
            "btn_export_excel": "ðŸ“Š Export Excel",
            "btn_save": "ðŸ’¾ Save Project",
            "footer_credit": "Developed by: Nabel Al-Hameed"
        }
    }
};

class LanguageManager {
    constructor() {
        this.currentLang = localStorage.getItem('athar_language') || 'ar';
        this.applyLanguage(this.currentLang);
    }

    toggleLanguage() {
        this.currentLang = this.currentLang === 'ar' ? 'en' : 'ar';
        localStorage.setItem('athar_language', this.currentLang);
        location.reload();
    }

    applyLanguage(lang) {
        const config = LANG_CONFIG[lang];
        document.documentElement.dir = config.dir;
        document.documentElement.lang = config.lang;

        // Update basic static elements if they exist
        document.addEventListener('DOMContentLoaded', () => {
            this.updateUIText(config.translations);
            const toggleBtn = document.getElementById('globalLangToggle');
            if (toggleBtn) toggleBtn.innerText = config.btn;
        });
    }

    updateUIText(translations) {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[key]) {
                if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                    el.placeholder = translations[key];
                } else {
                    el.innerText = translations[key];
                }
            }
        });
    }

    get(key) {
        return LANG_CONFIG[this.currentLang].translations[key] || key;
    }

    getLang() {
        return this.currentLang;
    }
}

const LangManager = new LanguageManager();
