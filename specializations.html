<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø«Ø± | Ø§Ù„ØªØ®ØµØµØ§Øª ÙˆØ§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©</title>
    <link rel="stylesheet" href="style.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800;900&family=Outfit:wght@300;600;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="protection.js"></script>
    <script src="js/modules/prompt_builder.js"></script>
    <script src="js/modules/api_proxy.js"></script>
</head>

<body class="light-theme">
    <div class="bg-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <div class="container" style="max-width: 900px; padding-bottom: 80px;">
        <nav>
            <div class="logo-container">
                <div class="ripple-wrapper">
                    <div class="ripple"></div>
                    <img src="ØªÙ†Ø²ÙŠÙ„.jpg" id="mainLogo" alt="Athar">
                </div>
                <div>
                    <div class="logo">Ø£Ø«Ù€Ù€Ù€Ù€Ù€Ø±</div>
                    <div class="logo-slogan">Ø¯Ù„ÙŠÙ„ Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ù†ÙˆØ¹ÙŠØ©</div>
                </div>
            </div>
            <div class="nav-actions">
                <a href="index.html" class="btn btn-ghost">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            </div>
        </nav>

        <main class="anim-fade-in" style="margin-top: 40px;">
            <div class="glass-card" style="border-top: 5px solid var(--primary); padding: 40px; border-radius: 25px;">
                <div style="text-align: center; margin-bottom: 30px;">
                    <div class="icon-glow"
                        style="display:inline-flex; background:var(--primary); color:white; width:70px; height:70px; border-radius:18px; align-items:center; justify-content:center; font-size:2.2rem; margin-bottom:20px; box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);">
                        <i class="fas fa-globe-africa"></i>
                    </div>
                    <h1 style="font-weight: 900; color: var(--primary); font-size: 2.2rem; margin-bottom: 10px;">Ø¨ÙˆØµÙ„Ø©
                        Ø§Ù„ØªØ®ØµØµØ§Øª Ø§Ù„Ø¥Ù†Ø³Ø§Ù†ÙŠØ©</h1>
                    <p style="color: var(--text-secondary); font-size: 1.1rem;">Ø£Ø¯Ø®Ù„ Ø®Ù„ÙÙŠØªÙƒ Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ÙˆØ§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ Ù„Ù†Ø±Ø³Ù…
                        Ù„Ùƒ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØªØ®ØµØµÙŠ Ø§Ù„Ø£Ù†Ø³Ø¨.</p>
                </div>

                <div class="form-group">
                    <label
                        style="font-weight: bold; color: var(--primary); margin-bottom: 12px; display: block;">Ø§Ù„Ø®Ù„ÙÙŠØ©
                        Ø§Ù„Ø£ÙƒØ§Ø¯ÙŠÙ…ÙŠØ© ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª:</label>
                    <textarea id="userBg"
                        placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø®Ø±ÙŠØ¬ Ø­Ù‚ÙˆÙ‚ØŒ Ù…Ù‡Ø§Ø±Ø§Øª ØªÙˆØ§ØµÙ„ Ø¹Ø§Ù„ÙŠØ©ØŒ Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© Ù…Ø³ØªÙˆÙ‰ Ù…ØªÙˆØ³Ø·..."
                        style="width:100%; min-height:80px;"></textarea>
                </div>
                <div class="form-group" style="margin-top:20px;">
                    <label
                        style="font-weight: bold; color: var(--primary); margin-bottom: 12px; display: block;">Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ
                        Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:</label>
                    <input type="text" id="interests"
                        placeholder="Ù…Ø«Ù„Ø§Ù‹: Ø§Ù„Ø¹Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ø·ÙØ§Ù„ØŒ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠØŒ Ø§Ù„ØªØ¹Ù„ÙŠÙ…..." class="elegant-input"
                        oninput="handleAutoSuggest(this)">
                    <div id="aiMiniLoader"
                        style="position: absolute; left: 20px; top: 50%; transform: translateY(-50%); display: none;">
                        <div class="loading-spinner" style="width: 20px; height: 20px; border-width: 2px;"></div>
                    </div>
                </div>
            </div>

            <div id="loader" style="display: none; margin: 40px 0; text-align: center;">
                <div class="loading-spinner"
                    style="border: 4px solid var(--glass-border); border-top-color: var(--primary); width: 60px; height: 60px; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px;">
                </div>
                <h3 style="color: var(--primary); font-weight: 800;">Ø¬Ø§Ø±ÙŠ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª Ø§Ù„ØªØ®ØµØµÙŠØ©...</h3>
            </div>

            <div id="resultArea" style="display: none;" class="anim-slide-up">
                <div class="glass-card" style="margin-top: 30px; border-radius: 25px; padding: 40px;">
                    <div id="pathContent"></div>
                    <button onclick="ProtectionManager.verify(() => window.print())" class="btn btn-ghost"
                        style="width: 100%; margin-top: 40px; justify-content: center; border: 1px solid var(--glass-border);">
                        <i class="fas fa-file-pdf"></i> Ø­ÙØ¸ Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ø³Ø§Ø±
                    </button>
                </div>
            </div>
        </main>
    </div>

    <footer class="main-footer">
        <div class="footer-credit">ØªØ·ÙˆÙŠØ± ÙˆØªÙ†ÙÙŠØ° Ø£. Ù†Ø¨ÙŠÙ„ Ø§Ù„Ø­Ù…ÙŠØ¯ &copy; 2025</div>
    </footer>

    <style>
        .elegant-input {
            padding: 15px 20px;
            border-radius: 12px;
            border: 1px solid var(--glass-border);
            background: white;
            width: 100%;
            font-family: 'Cairo';
        }

        .path-banner {
            background: var(--primary);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            text-align: center;
        }

        .ladder-step {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.02);
            border-radius: 12px;
            border-right: 4px solid var(--primary);
        }

        .ladder-num {
            font-weight: 900;
            color: var(--primary);
            font-size: 1.2rem;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>

    <script>
        const apiProxy = new APIProxy();
        let timeout = null;

        function handleAutoSuggest(input) {
            clearTimeout(timeout);
            const val = input.value.trim();
            if (val.length < 3) return;
            timeout = setTimeout(() => { processAI(); }, 1800);
        }

        async function processAI() {
            const bg = document.getElementById('userBg').value;
            const interests = document.getElementById('interests').value;
            if (!bg) return;

            const loader = document.getElementById('loader');
            const resultArea = document.getElementById('resultArea');
            loader.style.display = 'block';
            resultArea.style.display = 'none';

            const prompt = PromptBuilder.buildUnifiedPrompt('ØªØ®ØµØµ', bg, {
                contextType: interests,
                itemCount: 10
            });

            try {
                const json = await apiProxy.callAI(prompt, { model: "llama-3.3-70b-versatile" });
                if (!json) throw new Error("AI_ERROR");

                document.getElementById('pathContent').innerHTML = `
                    <div class="path-banner">
                        <h2 style="margin:0;">Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø£Ù†Ø³Ø¨: ${json.suggested_specialization}</h2>
                        <p style="margin-top:10px; opacity:0.9;">${json.description}</p>
                    </div>
                    <h3 style="color:var(--primary); margin-bottom:20px;"><i class="fas fa-stairs"></i> Ø³Ù„Ù… Ø§Ù„ØµØ¹ÙˆØ¯ Ø§Ù„Ù…Ù‡Ù†ÙŠ:</h3>
                    ${(json.career_ladder || []).map((step, i) => `
                        <div class="ladder-step">
                            <span class="ladder-num">${i + 1}</span>
                            <span><strong>[${step.level}]</strong> ${step.role}</span>
                        </div>
                    `).join('')}
                    <div style="background:#fff1f2; padding:20px; border-radius:15px; border-right:5px solid #e11d48; margin-top:25px; color:#991b1b;">
                        <strong>âš ï¸ Ù†ØµÙŠØ­Ø© Ù„Ù„ØªØ¬Ù†Ø¨:</strong> ${json.warnings}
                    </div>
                `;

                resultArea.style.display = 'block';
            } catch (e) { console.error(e); }
            finally { loader.style.display = 'none'; }
        }
    </script>
</body>

</html>